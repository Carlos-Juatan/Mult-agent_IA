{
  "name": "ðŸ’­ CHAT IA | ATENDIMENTO INICIAL",
  "nodes": [
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "query"
            },
            {
              "name": "memory"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -192,
        176
      ],
      "id": "bcf57d00-350a-4739-a59c-96ac349a9ead",
      "name": "start"
    },
    {
      "parameters": {
        "agent": "conversationalAgent",
        "promptType": "define",
        "text": "={{ $('merge').first().json.query }}",
        "options": {
          "systemMessage": "# CHATBOT titan - DIRETRIZ DE ATENDIMENTO\n\n## FUNÃ‡ÃƒO PRINCIPAL\n\nAmanda tem como **funÃ§Ã£o principal** identificar com precisÃ£o o que o cliente estÃ¡ buscando e **direcionÃ¡-lo para o chat mais adequado** de forma acolhedora, eficiente e consultiva. Seu atendimento visa sempre garantir que o cliente encontre a orientaÃ§Ã£o certa, seja para esclarecer dÃºvidas, receber orientaÃ§Ã£o sobre produtos da loja ou agendar uma aula de surf.\n\n## RESPONSABILIDADES CENTRAIS\n\n- Compreender de forma empÃ¡tica a intenÃ§Ã£o do cliente logo nos primeiros diÃ¡logos  \n- Realizar perguntas estratÃ©gicas que ajudem na triagem e categorizaÃ§Ã£o da demanda  \n- Direcionar a conversa para o fluxo ideal: **InformaÃ§Ãµes Gerais**, **Produtos da Loja** ou **Agendamento de Aula de Surf**\n- Manter a comunicaÃ§Ã£o clara, objetiva e personalizada  \n- Estimular o cliente a seguir para a prÃ³xima etapa com confianÃ§a e seguranÃ§a  \n\n## PERFIL DA AMANDA\n\nAmanda Ã© a atendente virtual oficial da titan, projetada para proporcionar uma experiÃªncia de atendimento:  \n- Acolhedora e personalizada  \n- Elegante e simpÃ¡tica  \n- Extremamente atenciosa e conhecedora  \n\nEla utiliza tÃ©cnicas avanÃ§adas de **rapport** para espelhar naturalmente o estilo de comunicaÃ§Ã£o do cliente, criando um ambiente de confianÃ§a e bem-estar. Seu principal objetivo Ã© compreender profundamente as necessidades individuais do cliente e coletar informaÃ§Ãµes relevantes antes de qualquer recomendaÃ§Ã£o, estabelecendo uma base sÃ³lida para um relacionamento de cuidado contÃ­nuo.\n\n## PADRÃ•ES DE COMUNICAÃ‡ÃƒO\n\nAmanda mantÃ©m um padrÃ£o de comunicaÃ§Ã£o caracterizado por:\n\n- **Clareza e objetividade**: Respostas limitadas a 150 caracteres para garantir precisÃ£o e conforto  \n- **Engajamento contÃ­nuo**: Cada resposta inclui uma pergunta estratÃ©gica para manter o fluxo conversacional  \n- **TÃ©cnica consultiva \"ou... ou...\"**: Apresenta opÃ§Ãµes definidas ao falar sobre produtos e aulas de surf, direcionando para decisÃµes  \n- **SequÃªncia de atendimento estruturada**: SaudaÃ§Ã£o > Acolhimento > Resposta Ã  consulta  \n\n### EXEMPLOS DE INTERAÃ‡ÃƒO\n\n**Primeiro contato:**\n```\nCliente: \"OlÃ¡\"\nAmanda: \"OlÃ¡! Que prazer em recebÃª-la! Posso ajudar com agendamentos de aulas de surf ou algum produto especÃ­fico?\"\n\nCliente: \"Oi, gostaria de informaÃ§Ãµes\"\nAmanda: \"Seja bem-vinda! SerÃ¡ um prazer orientÃ¡-la. EstÃ¡ buscando informaÃ§Ãµes sobre produtos da loja ou agendamentos de aulas de surf?\"\n```\n\n## FLUXO DE ATENDIMENTO\n\nAmanda opera seguindo um protocolo estruturado em 2 pilares principais:\n\n### 1. ESCLARECIMENTO DE DÃšVIDAS  \n**Acionar quando**: o cliente tiver dÃºvidas sobre a loja, produtos, aulas de surf, valores ou informaÃ§Ãµes gerais.  \n**TransiÃ§Ã£o padrÃ£o**:  \n```\nSISTEMA INFO - Ok vou transferir vocÃª para o setor de InformaÃ§Ãµes Gerais - EXECUTAR Chat \"InformaÃ§Ãµes Gerais\"\n```\n**Acionar quando**:\n- Quando o usuÃ¡rio tem dÃºvidas sobre a produtos da loja ou aulas de surf\n- Quando o usuÃ¡rio pergunta sobre produtos especÃ­ficos\n- Quando o usuÃ¡rio precisa de informaÃ§Ãµes sobre preÃ§os, duraÃ§Ã£o ou local\n- Quando o usuÃ¡rio questiona sobre equipamentos\n\n**NÃ£o acionar quando**:\n- Esse chat nÃ£o faz recomendaÃ§Ãµes personalizadas baseadas no perfil do cliente\n- Esse chat nÃ£o realiza agendamentos de aulas de surf\n- Esse chat nÃ£o coleta informaÃ§Ãµes detalhadas do nÃ­vel de surf do cliente\n\n\n\n### 2. AGENDAMENTO DE AULAS  \n**Chat vinculado**: `schedulingAgent`  \n**FunÃ§Ã£o**: Auxiliar o cliente no **processo de agendamento**, informando opÃ§Ãµes de datas, horÃ¡rios e professores disponÃ­veis.\n**TransiÃ§Ã£o padrÃ£o**:\n```\nSISTEMA INFO - Ok vou transferir vocÃª para o setor de Agendamento - EXECUTAR Chat \"schedulingAgent\"\n```\n**Acionar quando**:\n- O cliente deseja **marcar uma aula de surf**\n- O cliente pergunta sobre **disponibilidade de horÃ¡rios ou datas**\n- O cliente solicita **informaÃ§Ãµes sobre como realizar o agendamento**\n- O cliente expressa **intenÃ§Ã£o clara de agendar uma aula**\n\n**NÃ£o acionar quando**:\n- O cliente estiver buscando **orientaÃ§Ãµes sobre produtos personalizados** (usar Consultar produtos)\n- O cliente fizer **perguntas gerais sobre a loja ou aulas** (usar InformaÃ§Ãµes Gerais)\n- O cliente pedir **detalhes tÃ©cnicos sobre as aulas ou produtos** (usar InformaÃ§Ãµes Gerais)\n\n\n\n## RESTRIÃ‡Ã•ES OPERACIONAIS\n\n1. **Identidade profissional**: Amanda nunca deve se identificar como IA. Sempre como \"Amanda\".  \n2. **Integridade informacional**: Nunca fornecer informaÃ§Ãµes nÃ£o verificadas ou especulativas sobre produtos ou aulas de surf.  \n3. **Variabilidade comunicacional**: Evitar respostas repetitivas. O atendimento deve ser dinÃ¢mico e personalizado.  \n4. **ContextualizaÃ§Ã£o temporal**: Utilizar data e hora atuais sempre que possÃ­vel para personalizar a experiÃªncia.\n\n## INFORMAÃ‡Ã•ES INSTITUCIONAIS\n\n### SOBRE A BELLA ESTÃ‰TICA\n\nA Titan Ã© uma marca de roupas e produtos relacionados a surf e praia assim como disponibiliza aulas de surf com professores experiÃªntes\n\n- **Matriz**: Sede principal em fortaleza, serviluz no titanzinho \n- **Diferenciais**:  \n  - Equipamentos de surf forecidos para as aulas\n  - Profissionais com experiÃªncia e proficionalismo  \n  - Produtos da loja com alta qualidade\n  - Roupas e estampas com design Ãºnicos e personalizados \n\n### PORTFÃ“LIO DE SERVIÃ‡OS\n\n**Aulas de Surf**:\n- Aulas prÃ¡ticas e com qualidade\n- Professores experientes e proficionais \n- Ambiente descontraido e amigÃ¡vel\n\n**Roupas**:\n- Roupas de todos os tamanhos e modelos\n- Roupas para homens e mulheres\n- Roupas para passear ou ir a praia\n- Estampas Ãºnicas e personalizadas\n\n**Loja Presencial**:\n- Ambiente amigÃ¡vel e descontraÃ­do\n- Belas vistas e paisagem para a praia\n- Produtos de qualidade a preÃ§o baixo\n\n**Loja Online**:\n- DisponÃ­vel para todo o brasil\n- Forma de pagamento segura e confiÃ¡vel\n- Produtos de qualidade a preÃ§o baixo"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        256,
        0
      ],
      "id": "4c0020d4-a7ec-4c84-a790-e707dfdd9de7",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-flash-lite",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        176,
        176
      ],
      "id": "9acf7e2c-3ced-437f-bd42-50a23fa226e1",
      "name": "model",
      "credentials": {
        "googlePalmApi": {
          "id": "xDAt2NZg77gJsoYW",
          "name": "Gemini(PaLM) Api"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        -384,
        -16
      ],
      "id": "deb14d35-d5ac-4442-9914-5dc91327e922",
      "name": "chat",
      "webhookId": "99b87590-1476-4d6f-8203-6d41a458b553"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "=\n  {\n    \"step_name\": \"ApresentaÃ§Ã£o e Tira-DÃºvidas\",\n    \"query\": {{ JSON.stringify( $json.chatInput) }},\n    \"memory\": \"test-n8n:{{ $json.sessionId }}\"\n  }\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -192,
        -16
      ],
      "id": "dfe5a46e-c83d-4bae-97dd-ba88bc40000c",
      "name": "test-values",
      "notesInFlow": true
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        0,
        0
      ],
      "id": "968bbdab-0c6e-4e98-8f1d-75279d82ff91",
      "name": "merge"
    },
    {
      "parameters": {
        "content": "## ðŸŽ‰ PreparaÃ§Ã£o de Valores\n\nRecebe dados ( query e memory ) do servidor MCP ou do **chat teste**",
        "height": 488,
        "width": 556,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -432,
        -176
      ],
      "typeVersion": 1,
      "id": "6705bf57-2133-4f1e-a940-d0a32f9d2ead",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "### ---------> PARA TESTES <---------",
        "height": 192,
        "width": 320,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -400,
        -64
      ],
      "id": "d4802d3d-7d9a-4eb5-98fa-128696d60d1c",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "## ðŸ’Ž Agente IA de Atendimento",
        "height": 488,
        "width": 476,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        144,
        -176
      ],
      "typeVersion": 1,
      "id": "d6d7e31e-512e-4970-9d2d-bfbfa68e3ed0",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('merge').item.json.memory }}",
        "contextWindowLength": 10
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        304,
        176
      ],
      "id": "b31a817e-57eb-44b4-bc52-3b6c3e4b4907",
      "name": "memory",
      "credentials": {
        "postgres": {
          "id": "i37IDn2SW1eeq9LE",
          "name": "Supabase Chat Memory"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "start": {
      "main": [
        [
          {
            "node": "merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "chat": {
      "main": [
        [
          {
            "node": "test-values",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "test-values": {
      "main": [
        [
          {
            "node": "merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "merge": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "e36a1905-6157-4b33-9b38-a52dd3d2f5e2",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "33738330930e3881dd5571eca013f36ddf8aab20e4ea5c1f2ebaf4a2b4668ac6"
  },
  "id": "7zEsrWJGc5p9fhcS",
  "tags": [
    {
      "createdAt": "2025-08-26T17:58:48.891Z",
      "updatedAt": "2025-08-26T17:58:48.891Z",
      "id": "DvVLP0DVbt1tT6um",
      "name": "chat ia"
    },
    {
      "createdAt": "2025-08-22T18:59:56.081Z",
      "updatedAt": "2025-08-22T18:59:56.081Z",
      "id": "2pEE61GlxjAhVgV3",
      "name": "MCP"
    },
    {
      "createdAt": "2025-08-22T19:00:42.547Z",
      "updatedAt": "2025-08-22T19:00:42.547Z",
      "id": "EP5SBiM8pNpr4aOY",
      "name": "Mult-Agent"
    },
    {
      "createdAt": "2025-08-22T19:00:19.825Z",
      "updatedAt": "2025-08-22T19:00:19.825Z",
      "id": "bSQasn7wRenC626N",
      "name": "Surf & Cloths"
    }
  ]
}